(()=>{"use strict";var t={928:(t,e,n)=>{n.d(e,{c:()=>a});var i=n(500),r=n.n(i),o=n(312),s=n.n(o)()(r());s.push([t.id,"\n\nbody {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\n.modal {\n    display: none;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 15px;\n    background-color: #fff;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n    border-radius: 5px;\n    z-index: 999;\n    overflow-y: auto;\n    max-height: 80%;\n    max-width: 80%;\n}\n\n.overlay {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 998;\n}\n\n.modal-content {\n    overflow-y: auto;\n    word-wrap: break-word;\n}\n\n.close-btn {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    cursor: pointer;\n}\n\n",""]);const a=s},600:(t,e,n)=>{n.d(e,{c:()=>a});var i=n(500),r=n.n(i),o=n(312),s=n.n(o)()(r());s.push([t.id,"\n.containerChart{\n    padding: 20px 20px 25px 35px;\n}\n.containerChart svg{\n    overflow: visible;\n    position: absolute;\n}\n.containerChart .columnContainer{\n    display: flex;\n    align-items: flex-end;\n}\n",""]);const a=s},676:(t,e,n)=>{n.d(e,{c:()=>a});var i=n(500),r=n.n(i),o=n(312),s=n.n(o)()(r());s.push([t.id,".createChartContainer {\n    margin-top: 5px;\n    display: flex;\n    align-items: center;\n    gap: 5px;\n}\n\n.createChartContainer>.createChartButton {\n    height: 21px;\n    padding: 0 10px;\n    border-radius: 5px;\n    background: grey;\n    white-space: nowrap;\n    width: auto;\n    color: #eaeaea;\n    border: 0.3px solid black;\n}\n.controlPanel{\n    display: flex;\n    gap: 5px;\n}",""]);const a=s},780:(t,e,n)=>{n.d(e,{c:()=>a});var i=n(500),r=n.n(i),o=n(312),s=n.n(o)()(r());s.push([t.id,".errorText{\n    color: red;\n    margin: 0;\n}",""]);const a=s},904:(t,e,n)=>{n.d(e,{c:()=>a});var i=n(500),r=n.n(i),o=n(312),s=n.n(o)()(r());s.push([t.id,"*{\n    box-sizing: border-box;\n}\n.myTable {\n    border-collapse: collapse;\n}\n.footerTable {\n    background-color: rgba(128, 128, 128, 0.1);\n}\n.myTable td, .myTable th {\n    height: 40px;\n    padding: 0 20px;\n    border: 1px solid black;\n}\n\n.thCont{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n.tdCont{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-direction: column;\n\n}\n\n.myTable{\n    overflow: auto;\n    margin-top: 50px;\n    table-layout: fixed;\n}\n.myTable svg{\n    width: 100%;\n    height: 100%;\n}\n.myTable button{\n    padding: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 15px;\n    height: 15px;\n    background: none;\n    border: none;\n}\n\n.thPopperAddCont{\n    width: 6px;\n    height: 40px;\n    position:relative;\n    cursor: col-resize;\n}\n.tdPopperAddCont{\n    width: calc(100% + 40px);\n    height: 6px;\n    position:relative;\n}\n.thPopperRemoveCont{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    visibility: hidden;\n}\nbody:has(.thPopperAddCont:hover){\n    user-select: none;\n}\n.thPopperRemove{\n    position: absolute;\n    display: flex;\n    justify-content: start;\n    align-items: center;\n    height: 60px;\n    top: -32px;\n    transform: translate(-50%, -50%);\n}\n.myTable th:hover:not(:has(.thPopperAddCont:hover)) .thPopperRemoveCont{\n    visibility: initial;\n}\n.tdPopperRemoveCont{\n    position: absolute;\n    top: 50%;\n    bottom: 50%;\n    right: 100%;\n    visibility: hidden;\n}\n.tdPopperRemove{\n    position: absolute;\n    display: flex;\n    left: -5px;\n    justify-content: start;\n    align-items: center;\n    width: 35px;\n    transform: translate(-50%, -50%);\n}\n.myTable td:hover:not(:has(.tdPopperAddCont:hover)) .tdPopperRemoveCont{\n    visibility: initial;\n}\n.myTable th{\n    position: relative;\n}\n.myTable td{\n    position: relative;\n}\n\n.myTable td:focus{\n    border: 2px solid black;\n}\n.tdTextNode:focus{\n    outline: none;\n}\n.myTable td:has(.tdTextNode:focus){\n    border: 2px solid black;\n    border-radius: 3px;\n}\n\n.tdTextNode{\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    cursor: text;\n}\n.thPopperAdd{\n    display: flex;\n    justify-content: start;\n    align-items: center;\n    flex-direction: column;\n    gap: 3px;\n    width: 80px;\n    height: 50px;\n    position: absolute;\n    top: -43px;\n    visibility: hidden;\n\n}\n.tdPopperAdd{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 30px;\n    height: 23px;\n    position: absolute;\n    left: -28px;\n    visibility: hidden;\n}\n.thPopperAddInput{\n    width: 100%;\n}\n.thPopperAddCont:hover .thPopperAdd{\n    visibility: initial;\n}\n.thPopperAdd:hover {\n    visibility: initial;\n}\n.thPopperAdd:has(input:focus){\n    visibility: initial;\n}\n\n.tdPopperAddCont:hover .tdPopperAdd{\n    visibility: initial;\n}\n.tdPopper:hover {\n    visibility: initial;\n}\n.left20{\n    left: 20.5px;\n}\n.right20{\n    right: 20.5px;\n}\n.bottom5{\n    bottom: 5.5px;\n}\n.top5{\n    top: 5.5px;\n}\n",""]);const a=s},312:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var h=0;h<t.length;h++){var c=[].concat(t[h]);i&&s[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},500:t=>{t.exports=function(t){return t[1]}},596:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var l=t[a],h=i.base?l[0]+i.base:l[0],c=o[h]||0,d="".concat(h," ").concat(c);o[h]=c+1;var u=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var f=r(p,i);i.byIndex=a,e.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var l=i(t,r),h=0;h<o.length;h++){var c=n(o[h]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=l}}},176:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},808:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},120:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},520:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},936:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:String(n)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){return document.getElementById(t)||"Элемент не найден"}class a{constructor(){this.listener=null,this.value=null}subscribe(t){return this.listener=t,{unsubscribe:()=>{this.listener=null}}}next(t){this.value=t,this.listener&&this.listener(t)}getValue(){return this.value}unsubscribeAll(){this.listener=null}}function l(t,e=[]){let n=document.createElement(t);if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t];n.classList.add(i)}return n}function h(t,e=[]){let n=document.createElementNS("http://www.w3.org/2000/svg",t);if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t];n.classList.add(i)}return n}function c(t,e){return t?e?void t.appendChild(e):"Элемент не валиден":"Контейнер не валиден"}var d=function(){function e(n,i){if(t(this,e),this.responseValid=this.validate(n,i),this.responseValid){this.id=n,this.tableData=i;var r=s(n);this.addColumn$=new a,this.addRow$=new a,this.removeRow$=new a,this.removeColumn$=new a,this.setTable$=new a,this.changeCellContent$=new a,this.error$=new a,r instanceof HTMLElement?this.containerElement=r:this.error$.next(r),this.renderMain()}}return o(e,[{key:"validate",value:function(t,e){return s(t)?0===e.header.length?(this.error$.next("Неверный заголовок таблицы. Укажите непустой массив."),!1):0===e.body.length?(this.error$.next("Недействительное тело таблицы. Укажите непустой массив."),!1):e.footer?!!((i=(n=e).header.length)>0&&n.body.every((function(t){return t.length===i})))||(this.error$.next("Неверный формат даты. Укажите действительные данные таблицы."),!1):(this.error$.next("Неверный нижний колонтитул. Укажите действительную строку."),!1):(this.error$.next("Неверный ID. Укажите действительный идентификатор строки."),!1);var n,i}},{key:"renderMain",value:function(){this.tableElement=l("table",["myTable"]);var t=l("thead"),e=l("tbody");c(this.tableElement,t),c(this.tableElement,e),this.theadElement=t,this.tbodyElement=e,this.renderHeader(),this.renderBody(),this.renderFooter(),c(this.containerElement,this.tableElement)}},{key:"renderHeader",value:function(){var t=this,e=new u("header",this.tableData.header),n=e.createRow();e.insertColumn$.subscribe((function(e){return t.insertColumn(e.x,e.insertData)})),e.deleteColumn$.subscribe((function(e){return t.deleteColumn(e.x)})),c(this.theadElement,n)}},{key:"renderBody",value:function(){for(var t=this,e=function(e){var n=new u("body",t.tableData.body[e]),i=n.createRow();n.insertRow$.subscribe((function(n){"before"===n.direction?t.insertRow(e+1):"after"===n.direction&&t.insertRow(e+2)})),n.deleteRow$.subscribe((function(){return t.deleteRow(e+1)})),n.newValue$.subscribe((function(n){t.changeCellContent$.next({x:n.x,y:e+1,textContent:n.CellText}),t.tableData.body[e][n.x-1]=n.CellText})),c(t.tbodyElement,i)},n=0;n<this.tableData.body.length;n++)e(n)}},{key:"renderFooter",value:function(){if(this.tableData.footer){var t=l("tfoot");this.tFooterElement=t;var e=new p(this.tableData.footer).createTf();e.textContent=this.tableData.footer,c(t,e),c(this.tableElement,t)}}},{key:"pushRow",value:function(){this.responseValid&&this.insertRow(this.tableData.body.length+1)}},{key:"pushColumn",value:function(t){t?this.insertColumn(this.tableData.header.length+1,t):this.error$.next("Не передан header")}},{key:"insertRow",value:function(t){if(this.responseValid)if(+t&&t>=0&&(this.tableData.body[t-1]||t===this.tableData.body.length+1)){for(var e=[],n=0;n<this.tableData.header.length;n++)e.push("");this.tableData.body.splice(t-1,0,e),this.tbodyElement.innerHTML="",this.renderBody(),this.addRow$.next({y:t})}else this.error$.next("Не корректные координаты для вставки ряда")}},{key:"insertColumn",value:function(t,e){if(this.responseValid)if(+t&&t>=0&&e&&this.tableData.header[t-1]||t===this.tableData.header.length+1){this.tableData.header.splice(t-1,0,e);for(var n=0;n<this.tableData.body.length;n++)this.tableData.body[n].splice(t-1,0,"");this.tbodyElement.innerHTML="",this.theadElement.innerHTML="",this.renderHeader(),this.renderBody(),this.addColumn$.next({x:t})}else this.error$.next("Не корректные координаты для вставки колонки, или не передан header")}},{key:"deleteRow",value:function(t){this.responseValid&&(+t&&t>0&&this.tableData.body.length>=t&&this.tableData.body[t-1]?(this.tableData.body.splice(t-1,1),this.tbodyElement.innerHTML="",this.renderBody(),this.removeRow$.next({y:t})):this.error$.next("Не корректные координаты для удаление ряда"))}},{key:"deleteColumn",value:function(t){if(this.responseValid)if(+t&&t>0&&this.tableData.header[t-1]){this.tableData.header.splice(t-1,1);for(var e=0;e<this.tableData.body.length;e++)this.tableData.body[e].splice(t-1,1);this.tbodyElement.innerHTML="",this.theadElement.innerHTML="",this.renderHeader(),this.renderBody(),this.removeColumn$.next({x:t})}else this.error$.next("Не корректные координаты для удаление колонки")}},{key:"getChartData",value:function(t){if(this.responseValid&&this.tableData.body[t-1]){for(var e=!1,n=[],i=0;i<this.tableData.body[t-1].length;i++)+this.tableData.body[t-1][i]||(e=!0,n.push("В ячейке y:".concat(t," x:").concat(i+1," не число")));if(!e)return{data:this.tableData.body[t-1].map((function(t){return+t?+t:0})),header:this.tableData.header};this.error$.next(n)}}},{key:"setTable",value:function(t){var e=this.validate(this.id,t);this.responseValid&&e&&JSON.stringify(t)!==JSON.stringify(this.tableData)&&(this.tableData=t,this.theadElement.innerHTML="",this.tbodyElement.innerHTML="",this.tFooterElement.innerHTML="",this.renderHeader(),this.renderBody(),this.renderFooter(),this.setTable$.next(this.tableData))}}]),e}(),u=function(){function e(n,i){t(this,e),this.type=n,this.content=i,this.insertColumn$=new a,this.insertRow$=new a,this.deleteColumn$=new a,this.deleteRow$=new a,this.newValue$=new a}return o(e,[{key:"createRow",value:function(){for(var t=this,e=l("tr"),n=function(n){var i,r,o=t.content[n];"header"===t.type?r=(i=new p(o)).createTh():"body"===t.type&&(r=(i=0===n?new p(o,!0):new p(o)).createTd()),r instanceof HTMLElement&&(i.newValue$.subscribe((function(e){return t.newValue$.next({CellText:e,x:n+1})})),i.insertColumn$.subscribe((function(e){"before"===e.direction?t.insertColumn$.next({insertData:e.insertData,x:n+1}):"after"===e.direction&&t.insertColumn$.next({insertData:e.insertData,x:n+2})})),i.insertRow$.subscribe((function(e){return t.insertRow$.next({direction:e.direction})})),i.deleteRow$.subscribe((function(){return t.deleteRow$.next()})),i.deleteColumn$.subscribe((function(){return t.deleteColumn$.next({x:n+1})})),c(e,r))},i=0;i<this.content.length;i++)n(i);return e}}]),e}(),p=function(){function e(n){var i=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t(this,e),this.cellChange=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.target;if(e&&(n=n.parentNode.parentNode),n.textContent!==i.content){i.content=n.textContent;var r=n.querySelector(".tdTextNode");r&&r.blur(),i.newValue$.next(n.textContent)}},this.listenChangeCellOnKey=function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),i.cellChange(t))},this.content=n,this.insertColumn$=new a,this.insertRow$=new a,this.deleteColumn$=new a,this.deleteRow$=new a,this.newValue$=new a,this.buttonAction=r}return o(e,[{key:"createTh",value:function(){var t=this,e=l("th"),n=l("div",["thCont"]),i=l("div",["tdTextNode"]),r=l("div",["thPopperAddCont","right20"]),o=l("div",["thPopperAddCont","left20"]),s=l("div",["thPopperRemoveCont"]),a=l("div",["thPopperAdd"]),h=l("div",["thPopperAdd"]),d=l("div",["thPopperRemove"]),u=l("button"),p=l("button"),f=l("button"),m=l("input",["thPopperAddInput"]),b=l("input",["thPopperAddInput"]);u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>',p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>',f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1e2633" d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>',u.onclick=function(){m.value&&t.insertColumn$.next({insertData:m.value,direction:"before"})},p.onclick=function(){b.value&&t.insertColumn$.next({insertData:b.value,direction:"after"})},f.onclick=function(){t.deleteColumn$.next()},document.addEventListener("DOMSubtreeModified",(function(){a.style.left="".concat(-a.offsetWidth/2,"px"),h.style.right="".concat(-a.offsetWidth/2,"px")})),i.textContent=this.content;var g,v=!1,y=0,C=function(t){if("right"===g&&v){var n=e.offsetWidth+(t.clientX-y);e.style.width="".concat(n,"px"),y=t.clientX}else if("left"===g&&v){var i=Array.from(e.parentNode.children)[Array.from(e.parentNode.children).indexOf(e)-1],r=i.offsetWidth+(t.clientX-y);i.style.width="".concat(r,"px"),y=t.clientX}},x=function t(){v=!1,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",t)};return e.onmousedown=function(t){return function(t){0!==Array.from(e.parentNode.children).indexOf(e)&&(t.target===r?g="left":t.target===o&&(g="right")),v=!0,document.addEventListener("mousemove",C),document.addEventListener("mouseup",x),y=t.clientX}(t)},c(a,m),c(h,b),c(a,u),c(h,p),c(d,f),c(s,d),c(r,a),c(o,h),c(n,r),c(n,i),c(n,o),c(n,s),c(e,n),e}},{key:"createTd",value:function(){var t=this,e=l("td"),n=l("div",["tdCont"]);n.addEventListener("mouseout",(function(t){t.stopPropagation()}));var i,r,o,s,a,h,d,u,p,f=l("div",["tdTextNode"]);return this.buttonAction&&(i=l("div",["tdPopperAddCont","bottom5"]),r=l("div",["tdPopperAddCont","top5"]),o=l("div",["tdPopperRemoveCont"]),s=l("div",["tdPopperAdd"]),a=l("div",["tdPopperAdd"]),h=l("div",["tdPopperRemove"]),d=l("button"),u=l("button"),p=l("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>',u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>',p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1e2633" d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>',d.onclick=function(){t.insertRow$.next({direction:"before"})},u.onclick=function(){t.insertRow$.next({direction:"after"})},p.onclick=function(){t.deleteRow$.next()},document.addEventListener("DOMSubtreeModified",(function(){s.style.top="".concat(-s.offsetHeight/2,"px"),a.style.bottom="".concat(-(s.offsetHeight/2-1),"px")}))),f.textContent=this.content,f.contentEditable="true",f.onblur=function(e){return t.cellChange(e,!0)},e.onmouseleave=this.cellChange,e.onmouseout=this.cellChange,e.onkeydown=this.listenChangeCellOnKey,this.buttonAction&&(c(h,p),c(o,h),c(s,d),c(a,u),c(i,s),c(r,a),c(n,o),c(n,i)),c(n,f),this.buttonAction&&c(n,r),c(e,n),e}},{key:"createTf",value:function(){var t=l("td",["footerTable"]);return t.textContent=this.content,t}}]),e}(),f=function(){function e(n,i){var r=this;t(this,e),this.table=new d(n,i),this.error$=new a,this.table.error$.subscribe((function(t){return r.error$.next(t)})),this.pluginErrorSubscriptions={},this.plugins={errorProcessing:null,modal:null,chartControl:null,chart:null}}return o(e,[{key:"addPlugin",value:function(t){var e,n=this;e=t instanceof Function?new t:t,this.plugins.hasOwnProperty(e.name)?(this.plugins[e.name]=e,e.registration(this),this.pluginErrorSubscriptions[e.name]=e.error$.subscribe((function(t){return n.error$.next(t)}))):this.error$.next("Ошибка загрузки плагина")}},{key:"removePlugin",value:function(t){this.plugins[t]?(this.plugins[t].unRegister(),this.pluginErrorSubscriptions[t].unsubscribe(),this.plugins[t]=null):this.error$.next("Ошибка удаление плагина")}},{key:"getPlugin",value:function(t){var e=this.plugins[t];return e?{plugin:e,isPresent:!0}:{plugin:null,isPresent:!1}}}]),e}(),m=n(596),b=n.n(m),g=n(520),v=n.n(g),y=n(176),C=n.n(y),x=n(120),w=n.n(x),A=n(808),M=n.n(A),k=n(936),T=n.n(k),$=n(904),D={};D.styleTagTransform=T(),D.setAttributes=w(),D.insert=C().bind(null,"head"),D.domAPI=v(),D.insertStyleElement=M(),b()($.c,D),$.c&&$.c.locals&&$.c.locals;var L=n(780),H={};H.styleTagTransform=T(),H.setAttributes=w(),H.insert=C().bind(null,"head"),H.domAPI=v(),H.insertStyleElement=M(),b()(L.c,H),L.c&&L.c.locals&&L.c.locals,window.ErrorProcessingPlugin=class{constructor(){this.name="errorProcessing"}registration(t){this.error$=new a,this.subscribeError=t.error$.subscribe((e=>{if(console.log(e),t.plugins.modal){let n=t.getPlugin("modal").plugin;Array.isArray(e)&&(e=e.join("<br>"));let i=l("h3",["errorText"]);i.innerHTML=e;let r=n.createModal(i,!0);n.openModal(r)}}))}unRegister(){this.subscribeError.unsubscribe()}};class P{constructor(t,e="basicIdContent",n=!1){this.destroyMode=n,this.modal=l("div",["modal"]);const i=l("span",["close-btn"]);i.innerHTML="&times;",i.addEventListener("click",(()=>this.closeModal())),this.modalContent=l("div",["modal-content"]),this.modalContent.id=e,"string"==typeof t?this.modalContent.innerHTML=t:t&&c(this.modalContent,t),this.overlay=l("div",["overlay"]),this.overlay.addEventListener("click",(()=>this.closeModal())),c(this.modal,i),c(this.modal,this.modalContent),c(document.body,this.modal),c(document.body,this.overlay)}openModal(){document.body.style.overflow="hidden",this.modal.style.display="block",this.overlay.style.display="block"}closeModal(){document.body.style.overflow="initial",this.modal.style.display="none",this.overlay.style.display="none",this.destroyMode&&(this.modal.remove(),this.overlay.remove())}destroy(){this.modal.remove(),this.overlay.remove()}setBackGroundColorModal(t){this.modal.style.backgroundColor=t}setBackGroundColorOverlay(t){this.overlay.style.backgroundColor=t}setMaxWidth(t){this.modal.style.maxWidth=t}setMaxHeight(t){this.modal.style.maxHeight=t}setContent(t){"string"==typeof t?this.modalContent.innerHTML=t:t&&c(this.modalContent,t)}}var E=n(928),R={};R.styleTagTransform=T(),R.setAttributes=w(),R.insert=C().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=M(),b()(E.c,R),E.c&&E.c.locals&&E.c.locals,window.ModalPlugin=class{constructor(){this.name="modal",this.error$=new a,this.modals=[]}registration(){}createModal(t,e=!1){let n=new P(t,null,e);return this.modals.push(n),n}setContent(t,e){this.modals.indexOf(t)>=0?t.setContent(e):this.error$.next("Модальное окно не зарегестрированно")}openModal(t){this.modals.indexOf(t)>=0?t.openModal():this.error$.next("Модальное окно не зарегестрированно")}closeModal(t){this.modals.indexOf(t)>=0?t.closeModal():this.error$.next("Модальное окно не зарегестрированно")}unRegister(){this.modals.forEach((t=>{t.destroy()})),this.modals=[]}};var z=n(676),S={};S.styleTagTransform=T(),S.setAttributes=w(),S.insert=C().bind(null,"head"),S.domAPI=v(),S.insertStyleElement=M(),b()(z.c,S),z.c&&z.c.locals&&z.c.locals,window.ChartControl=class{constructor(){this.error$=new a,this.name="chartControl"}registration(t){setTimeout((()=>{this.controller=t;let e=l("div",["createChartContainer"]),n=l("button",["createChartButton"]),i=l("input",["createChartInput"]),r=t.getPlugin("modal");if(!r.isPresent)return void this.error$.next("Плагин модального окно не подключен");let o=t.getPlugin("chart");if(!o.isPresent)return void this.error$.next("Плагин отрисовки графика не подключен");let s=r.plugin,a=o.plugin.createChart({data:[],header:[]}),h=l("div"),d=l("div",["controlPanel"]),u=l("button");u.innerHTML="Column";let p=l("button");p.innerHTML="Line",p.onclick=()=>a.setChartType("line"),u.onclick=()=>a.setChartType("column"),c(d,p),c(d,u),c(h,d),c(h,a.chartContainer),this.modal=s.createModal(h),n.onclick=()=>{let e=t.table.getChartData(+i.value);e&&(a.setChartData(e.data,e.header),s.openModal(this.modal))},n.innerHTML="Нарисовать график",c(e,n),c(e,i),t.table.tableElement.insertAdjacentElement("afterend",e)}),0)}unRegister(){this.controller.table.tableElement.parentNode.querySelector(".createChartContainer").remove(),this.modal.destroy()}};class N{constructor(t,e,n,i="line"){this.chartTypeMethods={line:()=>{this.chartContainer.innerHTML="",this.svgMarksContainer=null,this.svgLineContainer=null,this.renderSvg(),this.renderLineChart()},column:()=>{this.chartContainer.innerHTML="",this.svgMarksContainer=null,this.svgLineContainer=null,this.renderSvg(),this.renderColumnChart()}},this.chartData=t,this.headerData=e,this.size=n,this.chartType=i,this.markCount=10,this.markColor="#a0a0a0",this.markWidth=.1,this.markTextColor="rgba(53, 53, 53, 0.9)",this.lineColor="rgb(69, 97, 255)",this.lineWidth=1,this.circleColor="blue",this.circleRadius=3,this.columnColor="rgba(53, 53, 53, 0.575)",this.columnBorder="0.5px solid rgba(53, 53, 53, 0.9)",this.error$=new a,this.renderBase(),this.setChartType(this.chartType)}renderBase(){this.chartContainer=l("div",["containerChart"]),this.setContainerSize()}setContainerSize(){this.chartContainer.style.width=this.size.width+55+"px",this.chartContainer.style.height=this.size.height+45+"px"}renderSvg(){const t=h("svg");t.setAttribute("width",`${this.size.width}`),t.setAttribute("height",`${this.size.height}`),c(this.chartContainer,t),this.svgContainer=t}renderColumnChart(){this.chartColumnContainer=l("div",["columnContainer"]),c(this.chartContainer,this.chartColumnContainer),this.renderMarks();for(let t=0;t<this.chartData.length;t++){const e=this.chartData[t],n=l("div");n.style.height=this.size.height/this.findMaxNumberInArray(this.chartData)*e+"px",n.style.width=this.size.width/this.chartData.length+"px",n.style.background=this.columnColor,n.style.border=this.columnBorder,c(this.chartColumnContainer,n)}}renderLineChart(){this.svgLineContainer||(this.svgLineContainer=h("g",["svgLineContainer"]),c(this.svgContainer,this.svgLineContainer)),this.svgContainer.getAttribute("xmlns")||(this.svgContainer.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgContainer.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"));for(let t=0;t<this.chartData.length;t++){const e=this.chartData[t];let n=this.size.width/(this.chartData.length-1)*t,i=this.size.height-this.size.height/(this.findMaxNumberInArray(this.chartData)-this.findMinNumberInArray(this.chartData))*(e-this.findMinNumberInArray(this.chartData)),r=t+1<this.chartData.length?this.size.width/(this.chartData.length-1)*(t+1):0,o=t+1<this.chartData.length?this.size.height-this.size.height/(this.findMaxNumberInArray(this.chartData)-this.findMinNumberInArray(this.chartData))*(this.chartData[t+1]-this.findMinNumberInArray(this.chartData)):0,s=h("line");s.setAttribute("x1",`${n}`),s.setAttribute("y1",`${i}`),s.setAttribute("x2",`${r}`),s.setAttribute("y2",`${o}`),s.setAttribute("stroke",this.lineColor),s.setAttribute("stroke-width",`${this.lineWidth}`);let a=h("circle");a.setAttribute("cx",`${n}`),a.setAttribute("cy",`${i}`),a.setAttribute("r",`${this.circleRadius}`),a.setAttribute("fill",this.circleColor),t+1<this.chartData.length&&c(this.svgLineContainer,s),c(this.svgLineContainer,a)}this.svgMarksContainer||this.renderMarks()}renderMarks(){this.svgMarksContainer||(this.svgMarksContainer=h("g",["svgMarksContainer"]),c(this.svgContainer,this.svgMarksContainer));for(let t=0;t<=this.markCount;t++){let e=0,n=this.size.height-this.size.height/this.markCount*t,i=this.size.width,r=this.size.height-this.size.height/this.markCount*t,o=h("line");o.setAttribute("x1",`${e}`),o.setAttribute("y1",`${n}`),o.setAttribute("x2",`${i}`),o.setAttribute("y2",`${r}`),o.setAttribute("stroke",this.markColor),o.setAttribute("stroke-width",`${this.markWidth}`),c(this.svgMarksContainer,o)}this.renderXAxis(),this.renderYAxis()}renderXAxis(){for(let t=0;t<this.chartData.length;t++){let e=this.size.width/(this.chartData.length-1)*t-10,n=this.size.height+25,i=h("text");i.setAttribute("x",`${e}`),i.setAttribute("y",`${n}`),i.setAttribute("font-size","15px"),i.setAttribute("fill",this.markTextColor),i.textContent=this.headerData[t],c(this.svgMarksContainer,i)}}renderYAxis(){const t=this.findMinNumberInArray(this.chartData),e=this.findMaxNumberInArray(this.chartData);for(let n=0;n<=this.markCount;n++){let i=-30,r=this.size.height-this.size.height/this.markCount*n+5,o=Math.round(100*((e-t)/this.markCount*n+t))/100,s=h("text");s.setAttribute("x",`${i}`),s.setAttribute("y",`${r}`),s.setAttribute("font-size","15px"),s.setAttribute("fill",this.markTextColor),s.textContent=o.toString(),c(this.svgMarksContainer,s)}}findMaxNumberInArray(t){if(0===t.length)return null;let e=t[0];for(let n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}findMinNumberInArray(t){if(0===t.length)return null;let e=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}setChartType(t){this.chartTypeMethods[t]&&this.chartTypeMethods[t]()}setChartData(t,e){Array.isArray(t)&&t.length>=2?(this.headerData=e,this.chartData=t,this.chartContainer.innerHTML="",this.setChartType(this.chartType)):this.error$.next("Неверные данные диаграммы. Пожалуйста, предоставьте массив данных.")}setMarkColor(t){if(this.markColor=t,this.svgMarksContainer){let t=Array.from(this.svgMarksContainer.children).filter((t=>"line"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("stroke",this.markColor)}}setMarkCount(t){"number"==typeof t&&t>2?(this.markCount=t,this.svgMarksContainer.remove(),this.svgMarksContainer=null,this.renderMarks()):this.error$.next("Недопустимое значение счетчика. Укажите число, большее или равное 2.")}setMarkWidth(t){if(this.markWidth=t,this.svgMarksContainer){let t=Array.from(this.svgMarksContainer.children).filter((t=>"line"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("stroke-width",`${this.markWidth}`)}}setMarkTextColor(t){if(this.markTextColor=t,this.svgMarksContainer){let t=Array.from(this.svgMarksContainer.children).filter((t=>"text"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("fill",this.markTextColor)}}setLineColor(t){if(this.lineColor=t,this.svgLineContainer){let t=Array.from(this.svgLineContainer.children).filter((t=>"line"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("stroke",this.lineColor)}}setLineWidth(t){if(this.lineWidth=t,this.svgLineContainer){let t=Array.from(this.svgLineContainer.children).filter((t=>"line"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("stroke-width",`${this.lineWidth}`)}}setCircleColor(t){if(this.circleColor=t,this.svgLineContainer){let t=Array.from(this.svgLineContainer.children).filter((t=>"circle"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("fill",this.circleColor)}}setCircleRadius(t){if(this.circleRadius=t,this.svgLineContainer){let t=Array.from(this.svgLineContainer.children).filter((t=>"circle"===t.tagName));if(t.length>0)for(let e=0;e<t.length;e++)t[e].setAttribute("r",`${this.circleRadius}`)}}setColumnColor(t){if(this.columnColor=t,this.chartColumnContainer){let t=Array.from(this.chartColumnContainer.children);if(t.length>0)for(let e=0;e<t.length;e++)t[e].style.backgroundColor=this.columnColor}}setColumnBorder(t){if(this.columnBorder=t,this.chartColumnContainer){let t=Array.from(this.chartColumnContainer.children);if(t.length>0)for(let e=0;e<t.length;e++)t[e].style.border=this.columnBorder}else this.error$.next("Неверный формат данных границы. Пожалуйста, укажите строковый формат.")}setChartWidth(t){"number"==typeof t&&t>0?(this.size.width=t,this.chartContainer.innerHTML="",this.setContainerSize(),this.setChartType(this.chartType)):this.error$.next("Недопустимая ширина диаграммы. Укажите положительное число.")}setChartHeight(t){"number"==typeof t&&t>0?(this.size.height=t,this.chartContainer.innerHTML="",this.setContainerSize(),this.setChartType(this.chartType)):this.error$.next("Недопустимая высота диаграммы. Пожалуйста, укажите положительное число.")}}var I=n(600),V={};V.styleTagTransform=T(),V.setAttributes=w(),V.insert=C().bind(null,"head"),V.domAPI=v(),V.insertStyleElement=M(),b()(I.c,V),I.c&&I.c.locals&&I.c.locals,window.ChartPlugin=class{constructor(){this.name="chart",this.error$=new a}createChart(t){return new N(t.data,t.header,{width:500,height:300})}registration(){}unRegister(){}},window.TableController=f})()})();